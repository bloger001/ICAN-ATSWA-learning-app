<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>ICAN ATSWA Prep</title>
  <link rel="stylesheet" href="./assets/app.css?v=build-restore"/>
</head>
<body>
  <div class="wrap">

    <!-- HEADER -->
    <header class="space-between" style="align-items:center">
      <h1>ICAN ATSWA Prep</h1>
      <div>
        <span id="authBadge" class="muted small">Not signed in</span>
        <button id="googleBtn" class="btn primary" style="margin-left:8px">Continue with Google</button>
      </div>
    </header>

    <!-- ABOUT / CREDIT -->
    <section class="card">
      <p>
        Built by fellow accounting student <strong>Silva Brutus (NSUK)</strong>.
        Contact: <a href="mailto:offixcialbloger@gmail.com">offixcialbloger@gmail.com</a>
      </p>
      <p id="signedState" class="muted">Not signed in</p>
    </section>

    <!-- STUDY -->
    <section class="grid">
      <a class="tile" href="./resources.html">
        <div class="muted small">Study</div>
        <div>Resources</div>
      </a>

      <a class="tile" href="./status.html">
        <div class="muted small">Track</div>
        <div>Status</div>
      </a>

      <a class="tile" href="./leaderboard.html">
        <div class="muted small">Community</div>
        <div>Leaderboard</div>
      </a>
    </section>

    <!-- ATSWA 1 -->
    <h3 class="muted" style="margin-top:24px">ATSWA 1</h3>
    <section class="grid">
      <a class="tile req-auth"
         href="./quiz.html?level=atswa1&subject=basic_accounting&mode=practice">
        <div class="muted small">ATSWA 1</div>
        <div>Basic Accounting</div>
      </a>

      <a class="tile req-auth"
         href="./quiz.html?level=atswa1&subject=business_law&mode=practice">
        <div class="muted small">ATSWA 1</div>
        <div>Business Law</div>
      </a>

      <a class="tile req-auth"
         href="./quiz.html?level=atswa1&subject=economics&mode=practice">
        <div class="muted small">ATSWA 1</div>
        <div>Economics</div>
      </a>

      <a class="tile req-auth"
         href="./quiz.html?level=atswa1&subject=comm_skills&mode=practice">
        <div class="muted small">ATSWA 1</div>
        <div>Communication Skills</div>
      </a>
    </section>

    <!-- ADMIN -->
    <section class="grid" style="margin-top:24px">
      <a class="tile" href="./admin.html">
        <div class="muted small">Admin</div>
        <div>Dashboard</div>
      </a>
    </section>

  </div>

  <!-- Scripts (order matters) -->
  <script src="./assets/firebase.js?v=build-restore"></script>
  <script src="./assets/app.js?v=build-restore"></script>

  <!-- Tiny helper: keep badge text in sync if app.js exposes auth state -->
  <script>
    // If app.js exposes a global hook, use it to reflect sign-in status.
    (function () {
      const badge = document.getElementById('authBadge');
      const state = document.getElementById('signedState');
      // Fallback click binding in case app.js looks for #googleBtn:
      const btn = document.getElementById('googleBtn');

      // App code should attach its own listener, but ensure the button is focusable
      btn.type = 'button';

      // If app.js exposes a simple event bus, listen; otherwise app.js will update these itself.
      window.__setAuthUI = function (isAuthed, email) {
        const label = isAuthed ? `Signed in â€” ${email}` : 'Not signed in';
        badge.textContent = label;
        state.textContent = label;
        // Hide sign-in button when authed
        btn.style.display = isAuthed ? 'none' : '';
      };
    })();
  </script>
</body>
</html>