<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>ICAN ATSWA Prep</title>
  <link rel="stylesheet" href="./assets/app.css?v=50"/>
</head>
<body>
  <div class="wrap">
    <header class="space-between" style="align-items:center">
      <h1>ICAN ATSWA</h1>
      <div class="muted" id="signedBadge">Not signed in</div>
    </header>

    <section class="card" id="aboutCard">
      <p>
        Built by fellow accounting student <strong>Silva Brutus</strong> (NSUK).
        Contact: <a href="mailto:offixcialbloger@gmail.com">offixcialbloger@gmail.com</a>
      </p>
      <div id="authRow" style="margin-top:10px;">
        <button class="btn primary" id="btnSignIn">Continue with Google</button>
        <button class="btn" id="btnSignOut" style="display:none">Sign out</button>
      </div>
      <div id="authError" class="error" style="display:none;margin-top:12px;"></div>
    </section>

    <section class="card" id="welcomeCard">
      <h2>Welcome</h2>
      <p>Please sign in to unlock quizzes, leaderboard and your personalized status.</p>
    </section>

    <!-- Visible only when signed in -->
    <section class="card" id="studyCard" style="display:none">
      <h2>Start a quiz</h2>
      <div class="tiles">
        <a class="tile" href="quiz.html?level=ATSWA1&subject=Basic%20Accounting&mode=practice">Basic Accounting</a>
        <a class="tile" href="quiz.html?level=ATSWA1&subject=Business%20Law&mode=practice">Business Law</a>
        <a class="tile" href="quiz.html?level=ATSWA1&subject=Economics&mode=practice">Economics</a>
        <a class="tile" href="quiz.html?level=ATSWA1&subject=Communication%20Skills&mode=practice">Communication Skills</a>
      </div>
    </section>

    <section class="card" id="linksCard" style="display:none">
      <h2>Tools</h2>
      <div class="tiles">
        <a class="tile" href="status.html">Status</a>
        <a class="tile" href="resources.html">Resources</a>
        <a class="tile" href="leaderboard.html">Leaderboard</a>
        <a class="tile" href="admin.html">Admin</a>
      </div>
    </section>
  </div>

  <!-- Load config first, then app -->
  <script src="./assets/firebase.js?v=50"></script>
  <script type="module" src="./assets/app.js?v=50"></script>

  <!-- Home-page hook used by app.js to show/hide sections -->
  <script>
    window._icanToggleHome = function(isAuthed, email, name){
      const W = (id)=>document.getElementById(id);
      W('welcomeCard').style.display = isAuthed ? 'none' : '';
      W('studyCard').style.display   = isAuthed ? '' : 'none';
      W('linksCard').style.display   = isAuthed ? '' : 'none';
      const badge = W('signedBadge');
      if (badge) badge.textContent = isAuthed ? ('Signed in â€” ' + (name || email || '')) : 'Not signed in';
      const btnIn  = document.getElementById('btnSignIn');
      const btnOut = document.getElementById('btnSignOut');
      if (btnIn)  btnIn.style.display  = isAuthed ? 'none' : '';
      if (btnOut) btnOut.style.display = isAuthed ? '' : 'none';
    };
  </script>
</body>
</html>